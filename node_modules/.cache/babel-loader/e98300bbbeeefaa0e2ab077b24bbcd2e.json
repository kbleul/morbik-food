{"ast":null,"code":"var _jsxFileName = \"/home/danu/Desktop/kb/Code projects/react/morbik-food/src/subreddit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport food_subredddits_set from \"./food_subredditlist\";\nimport saveFavorites from './savefavorites_function';\nimport removeFavorite from \"./removefavorites_function\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Subreddit = () => {\n  _s();\n\n  const [subreddit, set_subreddit] = useState([]);\n  const [subredditcontent_map, set_subredditcontent_map] = useState({});\n  const [comment_isfetched, set_comment_isfetched] = useState(false);\n  const {\n    slug\n  } = useParams();\n  const [a, seta] = useState(slug);\n  const [isfavorite, set_isfavorite] = useState(false);\n  let favoritereddits = [];\n  useEffect(() => {\n    const fetchsubreddit = async () => {\n      try {\n        const result = await axios(`https://www.reddit.com/r/${slug}/.json`);\n\n        if (localStorage.getItem(\"SavedSubReddits\")) {\n          favoritereddits = localStorage.getItem(\"SavedSubReddits\").split(\",\");\n\n          if (favoritereddits.includes(slug)) {\n            set_isfavorite(true);\n          }\n        }\n\n        set_subreddit(result.data.data.children);\n      } catch (e) {\n        console.log(`Fetch r/${slug} failed. ${e}`);\n      }\n    };\n\n    fetchsubreddit();\n  }, [slug, a]);\n  useEffect(() => {\n    if (subreddit.length > 0) {\n      let tempobj = {};\n      let counter = 0;\n      subreddit.forEach(item => {\n        const fetchcomments = async () => {\n          //remove ? to allow reddit api call\n          if (item.data.title[item.data.title.length - 1] === \"?\") {\n            item.data.title = item.data.title.slice(0, -1);\n          }\n\n          try {\n            const result = await axios(`https://www.reddit.com/r/${item.data.subreddit}/comments/${item.data.id}/${item.data.title}/.json`);\n            tempobj[item.data.id] = result.data[0].data.children[0].data;\n            counter++;\n\n            if (counter === subreddit.length - 1) {\n              set_subredditcontent_map(tempobj);\n              set_comment_isfetched(true);\n            }\n          } catch (error) {\n            console.log(\"Error: Fetch reddit posts and comments failed.\\n-------------------\" + error + \"-------------------------\");\n            tempobj[item.data.id] = {};\n            counter++;\n          }\n        };\n\n        fetchcomments();\n      });\n    }\n  }, [subreddit]);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"grid grid-cols-8 gap-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"col-start-1 col-end-3 row-start-2 row-end-2 mt-12\",\n      children: /*#__PURE__*/_jsxDEV(RedditNavigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"col-start-3 col-end-9 row-start-2 row-end-5 mt-12\",\n      children: subreddit.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: `https://www.reddit.com/r/${subreddit[0].data.subreddit}/`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"subredditmain_title\",\n            children: subreddit[0].data.subreddit\n          }, subreddit[0].data.subreddit, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), isfavorite ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pr-4 text-red-400\",\n          onClick: () => {\n            set_isfavorite(false);\n            removeFavorite(\"reddit\", subreddit[0].data.subreddit);\n          },\n          children: \"Remove from Favorites\"\n        }, `${subreddit[0].data.subreddit}${subreddit[0].data.subreddit}1`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-red-400 hover:border-b\",\n          onClick: () => {\n            set_isfavorite(true);\n            saveFavorites(\"reddit\", subreddit[0].data.subreddit);\n          },\n          children: \"Add to Favories\"\n        }, `${subreddit[0].data.subreddit}${subreddit[0].data.subreddit}15`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), subreddit.map(item => /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `https://www.reddit.com/${item.data.permalink}`,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"\",\n                  children: item.data.ups\n                }, `${item.data.ups} ${subreddit[0].data.permalink}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"upvotesvg\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"3em\",\n                    height: \"5em\",\n                    preserveAspectRatio: \"xMidYMid meet\",\n                    viewBox: \"0 0 16 16\",\n                    children: /*#__PURE__*/_jsxDEV(\"g\", {\n                      fill: \"currentColor\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        d: \"M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 99,\n                        columnNumber: 215\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 192\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 49\n                  }, this)\n                }, `${subreddit[0].data.permalink} ${subreddit[0].data.ups} ${subreddit[0].data.permalink}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 45\n                }, this)]\n              }, `${subreddit[0].data.permalink} ${subreddit[0].data.permalink} ${subreddit[0].data.permalink} ${subreddit[0].data.permalink}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: item.data.title\n                }, item.data.title, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 45\n                }, this), comment_isfetched && /*#__PURE__*/_jsxDEV(\"section\", {\n                  children: subredditcontent_map[item.data.id] !== undefined && /*#__PURE__*/_jsxDEV(\"section\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"\",\n                      children: subredditcontent_map[item.data.id].selftext\n                    }, subredditcontent_map[item.data.id].selftext, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: [\"Submitted by : \", item.data.author]\n                      }, item.data.author, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 114,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        children: [subredditcontent_map[item.data.id].num_comments, \" Comments \"]\n                      }, `${subredditcontent_map[item.data.id].num_comments} ${subredditcontent_map[item.data.id].subreddit_id}`, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 115,\n                        columnNumber: 57\n                      }, this)]\n                    }, `${subredditcontent_map[item.data.id].subreddit_id}${subredditcontent_map[item.data.id].subreddit_id}${item.data.author}`, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 59\n                    }, this)]\n                  }, subredditcontent_map[item.data.id].subreddit_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 67\n                }, this)]\n              }, `${item.data.title} ${item.data.author}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 33\n          }, this)\n        }, item.data.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }, this)), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Subreddit, \"efF+nfo2YuyqlW2QK1/cBUAf5L8=\", false, function () {\n  return [useParams];\n});\n\n_c = Subreddit;\n\nconst RedditNavigation = () => {\n  let foodsubreddit_arr = [];\n  const iterator1 = food_subredddits_set.entries();\n\n  for (const entry of iterator1) {\n    foodsubreddit_arr.push(entry[0]);\n    console.log(entry[0]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: foodsubreddit_arr.map(item => /*#__PURE__*/_jsxDEV(Link, {\n      to: `/reddit/${item}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: item\n        }, item, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this)\n      }, `${item}1`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }, this)\n    }, `${item}key`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 13\n  }, this);\n};\n\n_c2 = RedditNavigation;\nexport default Subreddit;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Subreddit\");\n$RefreshReg$(_c2, \"RedditNavigation\");","map":{"version":3,"sources":["/home/danu/Desktop/kb/Code projects/react/morbik-food/src/subreddit.js"],"names":["React","useState","useEffect","useParams","Link","axios","food_subredddits_set","saveFavorites","removeFavorite","Subreddit","subreddit","set_subreddit","subredditcontent_map","set_subredditcontent_map","comment_isfetched","set_comment_isfetched","slug","a","seta","isfavorite","set_isfavorite","favoritereddits","fetchsubreddit","result","localStorage","getItem","split","includes","data","children","e","console","log","length","tempobj","counter","forEach","item","fetchcomments","title","slice","id","error","map","permalink","ups","undefined","selftext","author","num_comments","subreddit_id","RedditNavigation","foodsubreddit_arr","iterator1","entries","entry","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams, Link } from \"react-router-dom\"\nimport axios from 'axios'\nimport food_subredddits_set from \"./food_subredditlist\"\nimport saveFavorites from './savefavorites_function'\nimport removeFavorite from \"./removefavorites_function\"\n\n\nconst Subreddit = () => {\n\n    const [subreddit, set_subreddit] = useState([]);\n    const [subredditcontent_map, set_subredditcontent_map] = useState({});\n    const [comment_isfetched, set_comment_isfetched] = useState(false);\n    const { slug } = useParams();\n    const [a, seta] = useState(slug)\n    const [isfavorite, set_isfavorite] = useState(false);\n    let favoritereddits = [];\n\n\n    useEffect(() => {\n        const fetchsubreddit = async () => {\n            try {\n                const result = await axios(`https://www.reddit.com/r/${slug}/.json`);\n\n                if (localStorage.getItem(\"SavedSubReddits\")) {\n                    favoritereddits = localStorage.getItem(\"SavedSubReddits\").split(\",\");\n                    if (favoritereddits.includes(slug)) { set_isfavorite(true); }\n                }\n\n                set_subreddit(result.data.data.children);\n\n            } catch (e) { console.log(`Fetch r/${slug} failed. ${e}`) }\n        }\n\n        fetchsubreddit();\n    }, [slug, a])\n\n    useEffect(() => {\n\n\n        if (subreddit.length > 0) {\n            let tempobj = {};\n            let counter = 0;\n\n            subreddit.forEach(item => {\n                const fetchcomments = async () => {\n\n                    //remove ? to allow reddit api call\n                    if (item.data.title[item.data.title.length - 1] === \"?\") { item.data.title = item.data.title.slice(0, -1); }\n\n                    try {\n                        const result = await axios(`https://www.reddit.com/r/${item.data.subreddit}/comments/${item.data.id}/${item.data.title}/.json`);\n                        tempobj[item.data.id] = result.data[0].data.children[0].data;\n\n                        counter++;\n\n                        if (counter === subreddit.length - 1) {\n                            set_subredditcontent_map(tempobj)\n                            set_comment_isfetched(true);\n                        }\n                    } catch (error) {\n                        console.log(\"Error: Fetch reddit posts and comments failed.\\n-------------------\" + error + \"-------------------------\");\n                        tempobj[item.data.id] = {}\n                        counter++;\n                    }\n                }\n                fetchcomments();\n            });\n        }\n    }, [subreddit])\n\n    return (\n        <article className=\"grid grid-cols-8 gap-3\">\n\n            <nav className=\"col-start-1 col-end-3 row-start-2 row-end-2 mt-12\">\n                <RedditNavigation />\n            </nav>\n            <main className=\"col-start-3 col-end-9 row-start-2 row-end-5 mt-12\">\n\n                {subreddit.length > 0 && <div>\n                    <a href={`https://www.reddit.com/r/${subreddit[0].data.subreddit}/`} target=\"_blank\" rel=\"noreferrer\" >\n                        <h2 className=\"subredditmain_title\" key={subreddit[0].data.subreddit}>{subreddit[0].data.subreddit}</h2></a>\n                    {isfavorite ?\n                        <button key={`${subreddit[0].data.subreddit}${subreddit[0].data.subreddit}1`} className=\"pr-4 text-red-400\" onClick={() => { set_isfavorite(false); removeFavorite(\"reddit\", subreddit[0].data.subreddit) }}>Remove from Favorites</button> :\n                        <button key={`${subreddit[0].data.subreddit}${subreddit[0].data.subreddit}15`} className=\"text-red-400 hover:border-b\" onClick={() => { set_isfavorite(true); saveFavorites(\"reddit\", subreddit[0].data.subreddit) }}>Add to Favories</button>\n                    }\n                    {\n                        subreddit.map(item => (\n                            <section className=\"\" key={item.data.id}>\n                                <a href={`https://www.reddit.com/${item.data.permalink}`} target=\"_blank\" rel=\"noreferrer\" >\n\n                                    <section className=\"\">\n\n                                        <div className=\"\" key={`${subreddit[0].data.permalink} ${subreddit[0].data.permalink} ${subreddit[0].data.permalink} ${subreddit[0].data.permalink}`}>\n\n                                            <p key={`${item.data.ups} ${subreddit[0].data.permalink}`} className=\"\">{item.data.ups}</p>\n\n                                            <p className=\"\" key={`${subreddit[0].data.permalink} ${subreddit[0].data.ups} ${subreddit[0].data.permalink}`}>\n                                                <svg className=\"upvotesvg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"3em\" height=\"5em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 16 16\"><g fill=\"currentColor\"><path d=\"M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z\" /></g></svg></p>\n                                        </div>\n\n                                        <div className=\"\" key={`${item.data.title} ${item.data.author}`}>\n                                            <h4 key={item.data.title}>{item.data.title}</h4>\n\n                                            {comment_isfetched && <section>{\n                                                subredditcontent_map[item.data.id] !== undefined &&\n\n                                                <section key={subredditcontent_map[item.data.id].subreddit_id}>\n\n                                                    <p className=\"\" key={subredditcontent_map[item.data.id].selftext}>{subredditcontent_map[item.data.id].selftext}</p>\n\n\n                                                    <div className=\"\" key={`${subredditcontent_map[item.data.id].subreddit_id}${subredditcontent_map[item.data.id].subreddit_id}${item.data.author}`}>\n                                                        <p key={item.data.author}>Submitted by : {item.data.author}</p>\n                                                        <button key={`${subredditcontent_map[item.data.id].num_comments} ${subredditcontent_map[item.data.id].subreddit_id}`} >{subredditcontent_map[item.data.id].num_comments} Comments </button>\n                                                    </div><hr />\n                                                </section>}\n\n                                            </section>}\n                                        </div>\n                                    </section>\n                                </a>\n                            </section>\n                        ))\n                    } </div>}\n            </main>\n\n        </article>\n    )\n}\n\nconst RedditNavigation = () => {\n\n    let foodsubreddit_arr = [];\n\n    const iterator1 = food_subredddits_set.entries();\n\n    for (const entry of iterator1) { foodsubreddit_arr.push(entry[0]); console.log(entry[0]) }\n\n    return (<section>\n        {\n            foodsubreddit_arr.map(item => (\n                <Link key={`${item}key`} to={`/reddit/${item}`} >\n                    <div key={`${item}1`}>\n                        <button key={item}>{item}</button>\n                    </div>\n                </Link>\n            ))\n        }\n    </section>)\n}\n\nexport default Subreddit"]},"metadata":{},"sourceType":"module"}